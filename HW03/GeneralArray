#include <iostream>
using namespace std;

class CppArray{
private:
    int size;
    float* data;
public:
    CppArray(int size = 0, float initvalue = 0.0f) :size(size){
        if(size > 0)
            data = new float[size];
        else
            data = nullptr;
        for(int i = 0;i < size;i++)
            data[i] = initvalue;
    }
    CppArray(const CppArray& cp2) :size(cp2.size){
        if(size > 0){
            data = new float[size];
            for(int i = 0;i < size;i++)
                data[i] = cp2.data[i];
        }else
            data = nullptr;
        
    }
    CppArray& operator=(const CppArray& cp2){
        if(this == &cp2)
            return *this;
        delete[] data;
        size = cp2.size;
        if(size > 0){
            data = new float[size];
            for(int i = 0;i < size;i++)
                data[i] = cp2.data[i];
        }else
            data = nullptr;
        return *this;
    }
    ~CppArray(){
        delete[] data;
    }
    float& operator[](int i){
        if(i <= 0 || i > size)
            throw out_of_range ("Index out of range!");
        return data[i-1];
    }
    int GetSize(){
        return size;
    }
    friend istream& operator>>(istream& cin, CppArray& arr);
    friend ostream& operator<<(ostream& cout, CppArray& arr);
};

istream& operator>>(istream& cin, CppArray& arr){
    for(int i = 0;i < arr.size;i++)
        cin >> arr.data[i];
    return cin;
}
ostream& operator<<(ostream& cout, CppArray& arr){
    cout << "{";
    for(int i = 0;i < arr.size;i++){
        cout << arr.data[i];
        if(i != arr.size-1)
            cout << ", ";
    }
    cout << "}";
    return cout;
}

int main(){
    int n, i;
    float v, f;
    cout << "請輸入陣列1大小及初始值：" << endl;
    cin >> n >> v;
    CppArray arr1(n, v);
    cout << "請輸入" << n << "個整數：" << endl;
    cin >> arr1;
    cout << "將複製陣列1至陣列2" << endl;
    CppArray arr2;
    arr2 = arr1;
    cout << "請輸入要將陣列1的第幾個數字改成多少：" << endl;
    cin >> i >> f;
    try{
        arr1[i] = f;
    }catch(const out_of_range& e){
        cout << "無法執行, 原因：" << e.what() << endl;
    }
    cout << "請輸入要將陣列2的第幾個數字改成多少：" << endl;
    cin >> i >> f;
    try{
        arr2[i] = f;
    }catch(const out_of_range& e){
        cout << "無法執行,原因:" << e.what() << endl;
    }
    cout << "陣列1為：" << arr1 << ", 陣列大小為" << arr1.GetSize() << endl;
    cout << "陣列2為：" << arr2 << ", 陣列大小為" << arr2.GetSize() << endl;
    CppArray arr3 = arr1;
    cout << arr3;
    
    return 0;
}
